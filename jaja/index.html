<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
		<title>JaJa</title>
		<link href="libs/tripoli/tripoli.simple.css" type="text/css" rel="stylesheet"> 
		<link href="libs/tripoli/plugins/tripoli.negative.css" type="text/css" rel="stylesheet">
		<link href="libs/tripoli/plugins/tripoli.type.css" type="text/css" rel="stylesheet">
		<link href="libs/tripoli/plugins/tripoli.visual.css" type="text/css" rel="stylesheet">
		<link href="libs/tripoli/plugins/tripoli.layout.css" type="text/css" rel="stylesheet">
		<!--[if IE]><link rel="stylesheet" type="text/css" href="tripoli.simple.ie.css"><![endif]-->
	</head>
	<body class="l1 wide">
		<div id="container">
			<div id="header">
				<div class="content">
					<h1>JaJa library- Javascript In Javascript</h1>
					<h2>Overview</h2>
				</div>
			</div>
	
			<div id="primary">
				<div class="content">


<p>
	JaJa is javascript self-interpreter, or metainterpreter library. A detailed description of
	such a tool can be found here: http://en.wikipedia.org/wiki/Self-interpreter
</p>
<p>
	In other words, this javascript library can interpret and execute javsacript source code
	without resorting to the usual and unsecure native methods such as the "eval" method.
</p>
<p>
	Expression are evaluated securelly by first deconstructing them into a more primitive
	structure called a "lamda tree" and then is executed in a "managed" way. At no point is the interpreted
	code allowed to access anything outside of the scope you specificlly provide for it. Expressions
	can either be "interpreted" in real-time or re-compiled to anonymous functions using the native
	Function constructor.
</p>
<p>
	For example, the expression cant cant find out about the window object unless you voluntarally
	add the window to the execution scope.
</p>
<p>
	This library was originally built to be used in a javascript templating engine, but I invite you
	to find other original use for it.
</p>

<h3>Modules</h3>

<p>
	JaJa has the following modules:
</p>
<ul>
	<li>eval: Safelly evaluate simple javascript expressions</li>
	<li>compile: returns a safe re-compiled version of javascript expressions</li>
</ul>
<p>
	Future JaJa modules : (very long term)
</p>
<ul>
	<li>execute: Execute full featured javascript code in a configurable safe/caja mode</li>
	<li>min: Returns a minified version of your code</li>
	<li>compress: Returns a compressed version of your code</li>
	<li>analyze: Performs code analysis on you javascript code and returns metadata and metrics</li>
	<li>lint: Provides recommendations to ameliorate your code</li>
</ul>
<h3>Usage</h3>

<p>
	Refer to the test suite found in tests.html for sample usage.
</p>

<h3>WHy Eval is Evil</h3>

<p>
	While you might have heard the "eval is evil" expression before, you might be curious to know
	the full rationnal behind this statement. Here is the list of arguments I have heard:
</p>
<ul>
	<li>Eval can lead to sloppy code .... to be explained ....</li>
	<li>Eval can open your app or library to unforseen code injection hacks ...explain...</li>
	<li>Eval something something something ....</li>
</ul>


<h3>Features Overview</h3>
<ul>
	<li>Syntax support for strings, numbers, arrays, function calls</li>
	<li>Evaluate commonly used expression syntax</li>
	<li>Secure execution by use of an explicit and restricted scope</li>
	<li>Choice between using a compiler or interpreter to evaluate the expressions</li>
	<li>Caching of parsed expressions</li>
</ul>


<h3>Known Limitations</h3>

<h4>
	Specific javascript syntax limitation:
</h4>
<p>
	Most unsupported expression syntax not supported can be seen in the <a href="tests.html">test suite, flagged in yellow</a>.
</p>
<h4>
	Limitations being considered for roadmap:
</h4>
<ul>
		<li>Limited exception handling and error messages</li>
		<li>Only expressions, no actual code sequences:
			Workaround: Function calls can contain any code you wish. With function call chaining
			such as Query does, something similar to sequences statement could be achieved.  But
			phylosophically, expressions should only compute values, not run logic.
		</li>
		<li>No access to primitive objects such as Math, Function, String, etc.
			eval
			parseInt
			parseFloat
			isNaM
			escape
			unescape
			taint
			untaint
			Workaround: Can be provided with scope injection
		</li>
		<li>Handling reserved keywords:
			abstract
			int
			boolean
			interface
			break
			long
			byte
			native
			case
			new
			catch
			null
			char
			package
			class
			private
			const
			protected
			continue
			public
			default
			return
			do
			short
			double
			static
			else
			super
			extends
			switch
			false
			synchronized
			final
			this
			finally
			throw
			float
			throws
			for
			transient
			function
			true
			goto
			try
			if
			var
			implements
			void
			import
			while
			in
			with
			instanceof</li>
		<li>No support for statements such as function, var, typeof, etc.: Workaround: Can be provided by creating function equivalents and scope injection</li>
		<li>No support for native regexp syntax: Workaround: Can be provided with scope injection</li>
</ul>


<h3>Roadmap</h3>

<h4>Release 0.7.3: Various housekeeping</h4>
<ul>
	<li>Re-validate code with JSLint</li>
	<li>More tests for nested parens</li>
	<li>More tests for nested arrays</li>
	<li>More tests for complex combined expressions</li>
</ul>

<h4>Release 0.8.0:</h4>
<ul>
	<li>In the test suite, ability to run/focus on a single test</li>
	<li>Support for object literals</li>
	<li>Support for constants (not members of window)
			true
			false
	</li>
</ul>

<h4>Release 0.9.0: OPERATORS</h4>
<ul>
	<li>Add tests for all operators planned for 0.9.X</li>
</ul>

<h4>Release 0.9.1: OPERATORS</h4>
<ul>
	<li>Support for logical operator: &&</li>
	<li>Support for logical operator: ||</li>
	<li>Support for logical operator: !</li>
	<li>Support for conditionnal operator: ?</li>
</ul>

<h4>Release 0.9.2: OPERATORS</h4>
<ul>
	<li>Support for bitwise operator: &</li>
	<li>Support for bitwise operator: |</li>
	<li>Support for bitwise operator: ^</li>
	<li>Support for bitwise operator: ~</li>
	<li>Support for bitwise operator: >></li>
	<li>Support for bitwise operator: <<</li>
	<li>Support for bitwise operator: >>></li>
	<li>Support for bitwise operator: *</li>
	<li>Support for bitwise operator: *</li>
</ul>

<h4>Release 0.9.3: OPERATORS</h4>
<ul>
	<li>Support for comparison operator: ==</li>
	<li>Support for comparison operator: ===</li>
	<li>Support for comparison operator: !=</li>
	<li>Support for comparison operator: ></li>
	<li>Support for comparison operator: <</li>
	<li>Support for comparison operator: >=</li>
	<li>Support for comparison operator: <=</li>
</ul>

<h4>Release 1.0.0:</h4>
<ul>
	<li>Adequate exception handling and error messages</li>
	<li>Externalize the runner and compiler so that they can be optionnal</li>
	<li>Tests with negative tests results for exceptions handling</li>
	<li>More complete test suite and performance benchmarks</li>
	<li>Cache the resulting function from compiled expression </li>
	<li>Create an automated performance benchmark from the existing test suite</li>
	<li>Ability to specify prohibited objects (by reference) such as document, eval, window, etc..</li>
</ul>

<h4>BACKLOG for v1.0 :</h4>
<ul>
	<li>Batch file for builds and minification</li>
	<li>A Lab UI for testing a playing with JaJa</li>
	<li>A generator of random javascript expressions for test purposes</li>
</ul>


<h4>Release 1.1.0:</h4>
<ul>
	<li>Support for increment operator: a++ ++a</li>
	<li>Support for increment operator: a-- --a</li>
	<li>Support for assignment operator: +=</li>
	<li>Support for assignment operator: -=</li>
	<li>Support for assignment operator: +=</li>
	<li>Support for assignment operator: *=</li>
	<li>Support for assignment operator: /=</li>
	<li>Support for assignment operator: %=</li>
	<li>Support for assignment operator: &=</li>
	<li>Support for assignment operator: |=</li>
	<li>Support for assignment operator: ^=</li>
	<li>Support for assignment operator: >>=</li>
	<li>Support for assignment operator: <<=</li>
	<li>Support for assignment operator: >>>=</li>
</ul>

<h4>Release 1.2.0:</h4>
<ul>
	<li>Support for comments (lock and line)
	<li>Support for statements (not members of window)
			var
			typeof
			for / for in
			if else
			function
			return
			break
			continue
			while
			with
			new
	</li>
</ul>

<h3>Reference Material</h3>
<ul>
	<li>Operators - http://en.wikibooks.org/wiki/JavaScript/Operators</li>
	<li>http://en.wikipedia.org/wiki/Self-interpreter</li>
	<li>http://en.wikipedia.org/wiki/Metacircular_Interpreter</li>
	<li>http://weblog.raganwald.com/2006/11/significance-of-meta-circular_22.html</li>
	<li>http://eigenratios.blogspot.com/</li>
</ul>



				</div>
			</div>
	
			<div id="secondary">
				<div class="content">
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="release-notes.html">Release Notes</a></li>
						<li><a href="tests.html">Test Suite</a></li>
						<li><a href="performance.html">Performance Benchmarks</a></li>
					</ul>
				</div>
			</div>
	
			<div id="footer">
				<div class="content">
					Copyright 2010 Mathieu Sylvain - Licensed as open source but I didnt find the  time to choose a license yet!
				</div>
			</div>
		</div>
	</body>
</html>
